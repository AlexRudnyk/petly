"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[20],{5923:function(e,t,r){r.r(t),r.d(t,{default:function(){return $}});var n=r(5861),a=r(9439),o=r(4687),s=r.n(o),i=r(2791),c=r(9434),u=r(5705),l=r(9230),d=r(1898),p=r(5218),h=r(9273),m=r(319),x=r(3682),f=r(6727),y=f.Ry().shape({email:f.Z_().matches(/^(?=.{1,63}$)(?=.{2,}@)[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,d.Z.t("email_match")).min(5,d.Z.t("at_least_five")).required(d.Z.t("required_field")),password:f.Z_().matches(/^\S+$/,d.Z.t("no_space")).min(7,d.Z.t("at_least_seven")).max(32,d.Z.t("max_tt")).required(d.Z.t("required_field")),confirm:f.Z_().oneOf([f.iH("password"),null],d.Z.t("Passwords_match")).required(d.Z.t("required_field"))}),j=f.Ry().shape({name:f.Z_().matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f\u0456\u0406\u0457\u0407\u0491\u0490]+(?: [a-zA-Z\u0430-\u044f\u0410-\u042f\u0456\u0406\u0457\u0407\u0491\u0490]+)*$/,d.Z.t("Only_cyrillic_latin")).required(d.Z.t("required_field")),city:f.Z_(),phone:f.Z_().matches(/^\+380\d{9}$/,"Invalid phone number(+380111111111)").min(13).max(13)}),Z=r(3037),v=r(3997),g=r(1604),_=r(9001),b=r(3329),C=function(e){var t=(0,i.useState)(!1),r=(0,a.Z)(t,2),n=r[0],o=r[1],s=(0,i.useState)(!1),c=(0,a.Z)(s,2),u=c[0],d=c[1],p=(0,l.$G)().t;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.ZP,{type:"email",name:"email",placeholder:p("Email"),errors:e.errors,touched:e.touched,values:e.values.email,required:!0,autoFocus:!0}),(0,b.jsx)(g.jj,{name:"email",component:"div"}),(0,b.jsxs)(v.ZC,{children:[(0,b.jsx)(g.ZP,{id:"password",name:"password",placeholder:p("Password"),type:n?"text":"password",errors:e.errors,touched:e.touched,values:e.values.password,required:!0}),(0,b.jsx)(v.yS,{type:"button",onClick:function(){o(!n)},children:n?(0,b.jsx)(v.rr,{}):(0,b.jsx)(v.OF,{})}),(0,b.jsx)(g.jj,{name:"password",component:"div"})]}),(0,b.jsxs)(v.ZC,{children:[(0,b.jsx)(g.ZP,{id:"confirm",type:u?"text":"password",name:"confirm",placeholder:p("Confirm_Password"),errors:e.errors,touched:e.touched,values:e.values.confirm,required:!0}),(0,b.jsx)(v.yS,{type:"button",onClick:function(){d(!u)},children:u?(0,b.jsx)(v.rr,{}):(0,b.jsx)(v.OF,{})}),(0,b.jsx)(g.jj,{name:"confirm",component:"div"})]}),(0,b.jsx)(g.zx,{type:"button",onClick:e.next,disabled:e.isValid,children:p("Next")}),(0,b.jsxs)(_.tw,{href:"https://petly-gd7x.onrender.com/api/users/google",children:[(0,b.jsx)(v.DW,{src:Z.Z,alt:"Google"}),p("Signup_with_Google")]})]})},w=r(9593),k=r(5737),q=r.n(k),E=(r(8404),r(922)),F=function(e){return e.map((function(e){var t=Object.assign({},e);return Number(e.useCounty)?(t.value="".concat(e.cityEn,", ").concat(e.countyEn,", ").concat(e.stateEn," region"),t.label="".concat(e.cityEn,", ").concat(e.countyEn,", ").concat(e.stateEn," region")):(t.value="".concat(e.cityEn,", ").concat(e.stateEn," region"),t.label="".concat(e.cityEn,", ").concat(e.stateEn," region")),t}))},S={},P=function(e){var t=(0,l.$G)().t,r=(0,i.useState)(null),o=(0,a.Z)(r,2),c=o[0],u=o[1],h=(0,i.useState)([]),m=(0,a.Z)(h,2),x=m[0],f=m[1],y=(0,i.useState)(!1),j=(0,a.Z)(y,2),Z=j[0],v=j[1];return(0,i.useEffect)((function(){function e(){return(e=(0,n.Z)(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c<3)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(!0),e.next=6,E.tF.get("api/cities?query=".concat(c));case 6:t=e.sent,r=t.data,f(F(r)),v(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("city error",e.t0),p.ZP.error(d.Z.t("Try_again"));case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.ZP,{type:"text",name:"name",placeholder:t("Name"),errors:e.errors,touched:e.touched,values:e.values.name,required:!0}),(0,b.jsx)(g.jj,{name:"name",component:"div"}),(0,b.jsx)(w.ZP,{onInputChange:function(e){e.length>=3&&u(e)},options:x,onChange:function(t){return e.forCity(t.value)},placeholder:t("City_region"),isSearchable:"true",isLoading:Z,noOptionsMessage:function(e){var r=e.inputValue;return t(r?"City_notfound":"City_letters")},styles:{control:function(e,t){return{display:"flex",padding:"4px",border:"1px solid #F59256",borderRadius:"20px",backgroundColor:"#FDF7F2",borderColor:t.isSelected?"#3CBC81":"#F59256"}}}}),(0,b.jsx)(g.jj,{name:"city",component:"div"}),(0,b.jsx)(q(),{name:"phone",type:"tel",className:S,onlyCountries:["ua"],country:"ua",countryCodeEditable:!1,errors:e.errors,value:e.values.phone,touched:e.touched,onChange:function(t,r,n){e.setFieldValue("phone","+".concat(t)),t.length<12?n.target.style.border="1px solid #E2001A":n.target.style.border="1px solid #3CBC81"}}),(0,b.jsx)(g.zx,{type:"submit",children:t("Register")}),(0,b.jsx)(g.zx,{type:"button",onClick:e.back,children:t("Back")})]})},z=r(9887),V={email:"",password:"",confirm:"",name:"",city:"",phone:""},$=function(){var e=(0,i.useState)(0),t=(0,a.Z)(e,2),r=t[0],o=t[1],f=(0,l.$G)().t,Z=(0,c.I0)(),v=function(){o(r+1)},_=function(){o(r-1)},w=function(){var e=(0,n.Z)(s().mark((function e(t,r){var n,a,o,i,c,u,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.email,a=t.password,o=t.name,i=t.city,c=t.phone,u=r.resetForm,i){e.next=5;break}return p.ZP.error(d.Z.t("City_required")),e.abrupt("return");case 5:if(13===c.length){e.next=8;break}return p.ZP.error(d.Z.t("Enter_phone")),e.abrupt("return");case 8:return e.next=10,Z((0,h.IU)({email:n,password:a,name:o,city:i,phone:c}));case 10:if(l=e.sent,console.log("resultSignup",l),"auth/signup/fulfilled"!==l.type){e.next=15;break}return e.next=15,Z((0,h.Ib)({email:n,password:a}));case 15:u();case 16:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return(0,b.jsx)(x.x,{as:"section",children:(0,b.jsx)(g.lY,{children:(0,b.jsx)(m.W,{children:(0,b.jsxs)(g.bh,{children:[(0,b.jsx)(g.zD,{children:f("Registration")}),(0,b.jsx)(u.J9,{initialValues:V,onSubmit:w,validationSchema:0===r?y:j,children:function(e){var t=e.errors,n=e.touched,a=e.isValid,o=e.setFieldValue,s=e.values;return(0,b.jsxs)(g.gR,{autoComplete:"off",children:[0===r&&(0,b.jsx)(C,{next:v,errors:t,touched:n,isValid:!a,values:s}),1===r&&(0,b.jsx)(P,{back:_,errors:t,touched:n,values:s,setFieldValue:o,forCity:function(e){o("city",e)}})]})}}),(0,b.jsx)(z.Z,{link:"/login",question:f("Is_account"),pageName:f("Log_in")})]})})})})}}}]);
//# sourceMappingURL=20.64f8af65.chunk.js.map